下面给出对该电子表格所有列的梳理与分析，并根据“稳定字段”（不会因时间或多次测量而变化）和“可变字段”（会随时间或多次测量而变化）进行分类。最后给出在数据库中如何分别存储的建议方案。此处的“稳定”与“可变”是从绝大多数情况下的业务逻辑出发，并不排除极少数情况下某些字段也可能变化，如确有需求可进一步讨论。

------

## 1. 电子表格所有列名称

```text
1.  教育ID号
2.  学校
3.  年级
4.  班级
5.  身高
6.  体重
7.  姓名
8.  性别
9.  年龄
10. 出生日期
11. 联系电话
12. 身份证号码
13. 区域
14. 联系地址
15. 家长姓名
16. 家长电话
17. 饮食偏好
18. 运动偏好
19. 健康教育
20. 既往史
21. 家族史
22. 是否早产
23. 过敏史
24. 框架眼镜
25. 隐形眼镜
26. 夜戴角膜塑型镜
27. 刮痧
28. 艾灸
29. 中药熏蒸
30. 热灸训练
31. 穴位贴敷
32. 热磁脉冲
33. 拔罐
34. 右眼-裸眼视力
35. 左眼-裸眼视力
36. 右眼-矫正视力
37. 左眼-矫正视力
38. 右眼-角膜曲率K1
39. 左眼-角膜曲率K1
40. 右眼-角膜曲率K2
41. 左眼-角膜曲率K2
42. 右眼-眼轴
43. 左眼-眼轴
44. 右眼屈光-球镜
45. 右眼屈光-柱镜
46. 右眼屈光-轴位
47. 左眼屈光-球镜
48. 左眼屈光-柱镜
49. 左眼屈光-轴位
50. 右眼散瞳-球镜
51. 右眼散瞳-柱镜
52. 右眼散瞳-轴位
53. 左眼散瞳-球镜
54. 左眼散瞳-柱镜
55. 左眼散瞳-轴位
56. 右眼-前房深度
57. 左眼-前房深度
58. 其他情况
59. 眼疲劳状况
60. 右眼-干预-裸眼视力
61. 左眼-干预-裸眼视力
62. 右眼屈光-干预-球镜
63. 右眼屈光-干预-柱镜
64. 右眼屈光-干预-轴位
65. 左眼屈光-干预-球镜
66. 左眼屈光-干预-柱镜
67. 左眼屈光-干预-轴位
68. 右眼散瞳-干预-球镜
69. 右眼散瞳-干预-柱镜
70. 右眼散瞳-干预-轴位
71. 左眼散瞳-干预-球镜
72. 左眼散瞳-干预-柱镜
73. 左眼散瞳-干预-轴位
74. 第1次干预
75. 第2次干预
76. 第3次干预
77. 第4次干预
78. 第5次干预
79. 第6次干预
80. 第7次干预
81. 第8次干预
82. 第9次干预
83. 第10次干预
84. 第11次干预
85. 第12次干预
86. 第13次干预
87. 第14次干预
88. 第15次干预
89. 第16次干预
```

------

## 2. 字段稳定性分析

下面将字段分为 **“稳定字段”** 和 **“可变字段”**。

- **稳定字段**：通常只在首次录入时填写，后续几乎不会变动，如学生姓名、身份证号等。
- **可变字段**：在不同时间或多次测量下会变化，需要按“多次记录”方式管理，如身高、体重、年级、班级、视力数据、干预数据等。

> 注意：如确有个别情况（例如家庭电话更改），也可以特殊处理，但在大多数业务场景下，这些被列为“稳定字段”的内容通常不随时间频繁变动。

### 2.1 稳定字段（建议存储在 **Student** 基本表）

1. **教育ID号**（education_id）
2. **学校**（school）
3. **姓名**（name）
4. **性别**（gender）
5. **出生日期**（birthday）
6. **身份证号码**（id_card）
7. **家长姓名**（parent_name）
8. **家长电话**（parent_phone）
9. **是否早产**（premature）——视具体业务而定，多数情况下不会变化
10. **联系电话**（phone）——如认为也非常少变，可放这里
11. **区域**（region）/ **联系地址**（address）——若基本不会变化，也可放在此；若有频繁搬家需求，则可移动到可变信息中

> *说明*：对于“区域”、“联系地址”、“联系电话”也可能视业务而定：如果允许后续变更，则可以移至可变字段；但如果系统希望将其视为比较稳定的信息，也可放在基本表中。

### 2.2 可变字段（建议存储在 **Extension / Snapshot** 表）

其余所有字段均会随着“测量时间”或“统计时间”而变化，或者用户可多次录入更新，如：

- **年级**（grade）

- **班级**（class_name）

- **身高**（height）

- **体重**（weight）

- **年龄**（age）

- **饮食偏好**（diet_preference）

- **运动偏好**（exercise_preference）

- **健康教育**（health_education）

- **既往史**（past_history）

- **家族史**（family_history）

- **过敏史**（allergy_history）

- 多选干预措施

  （如框架眼镜、隐形眼镜、夜戴角膜塑形镜、刮痧、艾灸、中药熏蒸、热灸训练、穴位贴敷、热磁脉冲、拔罐等）

  - 若使用独立字段方案，每一项都有一个布尔型字段（是/否），放在可变扩展中。

- 视力相关

  ：

  - 右/左眼-裸眼视力、矫正视力、角膜曲率K1/K2、眼轴、屈光（球镜、柱镜、轴位）
  - 散瞳后检查数据（球镜、柱镜、轴位）
  - 前房深度
  - 其他情况、眼疲劳状况

- 干预数据

  ：

  - 右/左眼-干预-裸眼视力、干预-球镜、干预-柱镜、干预-轴位
  - 散瞳-干预-球镜/柱镜/轴位
  - 第1~16次干预时间记录

- **年级、班级** 也随着学年变化而变化，故也放在可变信息里

- ……

------

## 3. 数据库存储建议

### 3.1 Student（基本表）

- **主键**：id (int, 自增)
- **教育ID号**：education_id (string, unique)
- **姓名**：name (string)
- **性别**：gender (string)
- **出生日期**：birthday (date)
- **身份证号码**：id_card (string)
- **家长姓名**：parent_name (string)
- **家长电话**：parent_phone (string)
- **学校**：school (string)
- **是否早产**：premature (bool / string)
- **联系电话**：phone (string)
- **区域** / **联系地址**（可选放这里或扩展）

*(以上字段在导入时若后续业务允许变更，可额外加“是否允许覆盖”逻辑。多数情况下它们相对稳定。)*

### 3.2 StudentExtension 或 Snapshot（扩展表 / 时间序列表）

- **主键**：ext_id (int, 自增)

- **student_id** (外键，指向 Student.id)

- **统计年份**（或统计日期）：year / measure_date

- 可变字段

  ：

  - 年级 (grade)
  - 班级 (class_name)
  - 身高 (height)
  - 体重 (weight)
  - 年龄 (age)
  - 饮食偏好 (diet_preference)
  - 运动偏好 (exercise_preference)
  - 健康教育 (health_education)
  - 既往史 (past_history)
  - 家族史 (family_history)
  - 过敏史 (allergy_history)
  - 多选干预措施（框架眼镜、隐形眼镜等 10+ 布尔字段）
  - 右/左眼-裸眼视力、矫正视力、角膜曲率、眼轴、屈光数据等
  - 干预数据：右/左眼干预视力、屈光、散瞳后数据等
  - 第1~16次干预时间
  - 其他情况 (other_info)
  - 眼疲劳状况 (fatigue_status)
  - ……

*(以上字段都可以视为与“某次测量 / 某个统计日期”关联，支持多次记录。)*

> 如果要区分“多次干预记录”，可再建一张“干预记录表” (intervRecords)，对每次干预进行单独记录，或使用 16 个字段简化存储，这要看实际业务需求。

------

## 4. 电子表格导入映射

在导入时，主要流程可如下：

1. **读取行**：从 Excel 中读取一行 => 拿到 “教育ID号” 等信息

2. 判断是否已存在该学生

   ：根据 “教育ID号” 查询 Student 基本表。

   - 若不存在 => 新建一条 Student 记录，写入“稳定字段”
   - 若存在 => 视业务决定是否允许更新基本表中的“稳定字段”（通常不覆盖，或只覆盖为空的字段）

3. 写扩展表

   ：针对可变字段（如年级、班级、视力等）都写到扩展表中：

   - 需要**一个“统计时间/年份”**列，保证同一个学生可以在不同时间多次导入。
   - 导入时让用户选择“本次导入属于哪一年/哪一次统计”，或者从 Excel 中取某列（如“统计年份”）
   - 每一行都插入一条 StudentExtension 记录

4. **多选干预措施**：如果使用多个布尔字段（如“框架眼镜”/“隐形眼镜”/“夜戴角膜塑型镜”等），在 Excel 中就有对应列。导入时只要判断这几列是“是/否”或“1/0”，写入数据库即可。

------

## 5. 对同一学生多次记录的查询/统计

1. **单次查询**：根据 `student_id` + `year`（或 `measure_date`）从扩展表中取最新一条或指定日期的一条记录。
2. **多次对比**：同一 `student_id` 下可能有多条扩展表记录，每条记录的 `year` 或 `measure_date` 不同，即可实现某字段的多次对比分析。
3. **聚合统计**：若要统计同一年或某区间内所有学生数据，则只要在扩展表上加时间条件 `WHERE measure_date BETWEEN ...` 或 `year=...` 并聚合即可。

------

## 6. 小结

1. **稳定字段**放在 **Student**（基本表）
2. **可变字段**放在 **StudentExtension** 或 Snapshot 表中（含 `student_id` 外键 & `统计时间/年份`）
3. 导入 Excel 时：
   - 匹配“教育ID号”，若无则新建学生基本信息
   - 可变字段统一写到扩展表，插入新记录
   - 可选：在导入界面提供“统计年份”或“测量日期”，存入扩展表
4. 多次数据分析：依赖扩展表存储同一学生的多条记录

这样既满足了 **“一次性录入稳定信息”** 的需求，也能方便 **“多次测量 / 多次导入”** 并行。对于将来可能增加的字段，可以扩展 extension 表结构或在后台配置更多可变字段列，从而不必频繁改动 Student 基本表结构。

------

### 备注

- 若“区域”“地址”“联系电话”等在实际业务中也可能变化，则可把它们也放在可变扩展表里，或把它们单独拆分成“家庭信息表”。
- 多选干预措施若字段过多，可以采用**独立表** + 关联（student_extension_id, measure_date, measure_item）也行，但简化起见常用布尔列。
- 数据库物理结构可再根据性能/查询需求做适当索引和拆分。



下面给出一份**“数据字段映射说明文档”**，将 Excel 电子表格的列名称与数据库对应的字段名称、类型及其存储位置（**Student** 基本表 或 **StudentExtension** 可变表）做了对应，并对“是否稳定字段”与“数据含义”做简要说明。根据前面讨论，**稳定字段**通常只在基本表保存且不随年份/多次测量变化；**可变字段**则放在扩展表里，每次导入都会插入一条新的扩展记录并带有“统计年份/测量日期”等时间标识。

------

## 1. Excel 列与数据库字段对应

下表中：

- **Excel列名**：电子表格中的列标题
- **数据库字段**：对应在数据库中的字段名称
- **字段类型**：建议的数据库类型（可根据实际情况微调）
- **表**：指示存储于哪张表（**Student** 或 **StudentExtension**）
- **稳定性**：**Stable** 表示“稳定字段”，**Variable** 表示“可变字段”
- **备注**：简要说明

> 注：对于“统计年份/测量日期”字段，此处没有在Excel中显式列出，需要在导入流程中由用户指定或在Excel另设列。本说明文档不再重复。

| **序号** | **Excel列名**          | **数据库字段**         | **字段类型**       | **表**           | **稳定性** | **备注**                                               |
| -------- | ---------------------- | ---------------------- | ------------------ | ---------------- | ---------- | ------------------------------------------------------ |
| 1        | 教育ID号               | education_id           | VARCHAR(50)        | Student          | Stable     | 每名学生唯一的标识，不随时间变化，作为基本表唯一索引   |
| 2        | 学校                   | school                 | VARCHAR(100)       | Student          | Stable     | 如果确有转学需求，可后续特殊处理；大多数情况下视为稳定 |
| 3        | 年级                   | grade                  | VARCHAR(20)        | StudentExtension | Variable   | 学生年级随时间变化，故放扩展表                         |
| 4        | 班级                   | class_name             | VARCHAR(20)        | StudentExtension | Variable   | 同上，班级随时间变化                                   |
| 5        | 身高                   | height                 | FLOAT(5,1)         | StudentExtension | Variable   | 每次测量身高可不同                                     |
| 6        | 体重                   | weight                 | FLOAT(5,1)         | StudentExtension | Variable   | 同上                                                   |
| 7        | 姓名                   | name                   | VARCHAR(50)        | Student          | Stable     | 学生姓名通常不变                                       |
| 8        | 性别                   | gender                 | VARCHAR(10)        | Student          | Stable     | 同上                                                   |
| 9        | 年龄                   | age                    | INT                | StudentExtension | Variable   | 每年导入可能更新                                       |
| 10       | 出生日期               | birthday               | DATE               | Student          | Stable     | 出生日期一般不变                                       |
| 11       | 联系电话               | phone                  | VARCHAR(20)        | Student          | Stable     | 若会频繁变动也可放扩展表                               |
| 12       | 身份证号码             | id_card                | VARCHAR(18)        | Student          | Stable     | 身份证号不变                                           |
| 13       | 区域                   | region                 | VARCHAR(100)       | Student          | Stable     | 如果经常迁移，可放扩展表                               |
| 14       | 联系地址               | address                | VARCHAR(200)       | Student          | Stable     | 同上视实际需求                                         |
| 15       | 家长姓名               | parent_name            | VARCHAR(50)        | Student          | Stable     |                                                        |
| 16       | 家长电话               | parent_phone           | VARCHAR(20)        | Student          | Stable     |                                                        |
| 17       | 饮食偏好               | diet_preference        | VARCHAR(100)       | StudentExtension | Variable   |                                                        |
| 18       | 运动偏好               | exercise_preference    | VARCHAR(100)       | StudentExtension | Variable   |                                                        |
| 19       | 健康教育               | health_education       | VARCHAR(200)       | StudentExtension | Variable   |                                                        |
| 20       | 既往史                 | past_history           | VARCHAR(200)       | StudentExtension | Variable   |                                                        |
| 21       | 家族史                 | family_history         | VARCHAR(200)       | StudentExtension | Variable   |                                                        |
| 22       | 是否早产               | premature              | VARCHAR(5) 或 BOOL | Student          | Stable     | 视为稳定字段                                           |
| 23       | 过敏史                 | allergy_history        | VARCHAR(200)       | StudentExtension | Variable   |                                                        |
| 24       | 框架眼镜               | glasses_frame          | BOOL               | StudentExtension | Variable   | 多选干预措施之一；是/否                                |
| 25       | 隐形眼镜               | glasses_contact        | BOOL               | StudentExtension | Variable   |                                                        |
| 26       | 夜戴角膜塑型镜         | glasses_orthok         | BOOL               | StudentExtension | Variable   |                                                        |
| 27       | 刮痧                   | guasha                 | BOOL               | StudentExtension | Variable   |                                                        |
| 28       | 艾灸                   | moxibustion            | BOOL               | StudentExtension | Variable   |                                                        |
| 29       | 中药熏蒸               | herbal_steam           | BOOL               | StudentExtension | Variable   |                                                        |
| 30       | 热灸训练               | hot_moxibustion_train  | BOOL               | StudentExtension | Variable   |                                                        |
| 31       | 穴位贴敷               | acupoint_paste         | BOOL               | StudentExtension | Variable   |                                                        |
| 32       | 热磁脉冲               | hot_magnetic_pulse     | BOOL               | StudentExtension | Variable   |                                                        |
| 33       | 拔罐                   | cupping                | BOOL               | StudentExtension | Variable   |                                                        |
| 34       | 右眼-裸眼视力          | vision_right           | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 35       | 左眼-裸眼视力          | vision_left            | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 36       | 右眼-矫正视力          | vision_right_corrected | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 37       | 左眼-矫正视力          | vision_left_corrected  | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 38       | 右眼-角膜曲率K1        | right_k1               | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 39       | 左眼-角膜曲率K1        | left_k1                | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 40       | 右眼-角膜曲率K2        | right_k2               | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 41       | 左眼-角膜曲率K2        | left_k2                | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 42       | 右眼-眼轴              | right_axis_length      | FLOAT(4,1)         | StudentExtension | Variable   |                                                        |
| 43       | 左眼-眼轴              | left_axis_length       | FLOAT(4,1)         | StudentExtension | Variable   |                                                        |
| 44       | 右眼屈光-球镜          | right_sphere           | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 45       | 右眼屈光-柱镜          | right_cylinder         | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 46       | 右眼屈光-轴位          | right_axis             | INT                | StudentExtension | Variable   | 单位°                                                  |
| 47       | 左眼屈光-球镜          | left_sphere            | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 48       | 左眼屈光-柱镜          | left_cylinder          | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 49       | 左眼屈光-轴位          | left_axis              | INT                | StudentExtension | Variable   |                                                        |
| 50       | 右眼散瞳-球镜          | right_sphere_sp        | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 51       | 右眼散瞳-柱镜          | right_cylinder_sp      | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 52       | 右眼散瞳-轴位          | right_axis_sp          | INT                | StudentExtension | Variable   |                                                        |
| 53       | 左眼散瞳-球镜          | left_sphere_sp         | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 54       | 左眼散瞳-柱镜          | left_cylinder_sp       | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 55       | 左眼散瞳-轴位          | left_axis_sp           | INT                | StudentExtension | Variable   |                                                        |
| 56       | 右眼-前房深度          | right_anterior_depth   | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 57       | 左眼-前房深度          | left_anterior_depth    | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 58       | 其他情况               | other_info             | VARCHAR(200)       | StudentExtension | Variable   |                                                        |
| 59       | 眼疲劳状况             | fatigue_status         | VARCHAR(100)       | StudentExtension | Variable   |                                                        |
| 60       | 右眼-干预-裸眼视力     | right_interv_vision    | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 61       | 左眼-干预-裸眼视力     | left_interv_vision     | FLOAT(3,1)         | StudentExtension | Variable   |                                                        |
| 62       | 右眼屈光-干预-球镜     | right_sphere_int       | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 63       | 右眼屈光-干预-柱镜     | right_cylinder_int     | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 64       | 右眼屈光-干预-轴位     | right_axis_int         | INT                | StudentExtension | Variable   |                                                        |
| 65       | 左眼屈光-干预-球镜     | left_sphere_int        | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 66       | 左眼屈光-干预-柱镜     | left_cylinder_int      | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 67       | 左眼屈光-干预-轴位     | left_axis_int          | INT                | StudentExtension | Variable   |                                                        |
| 68       | 右眼散瞳-干预-球镜     | right_sphere_sp_int    | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 69       | 右眼散瞳-干预-柱镜     | right_cylinder_sp_int  | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 70       | 右眼散瞳-干预-轴位     | right_axis_sp_int      | INT                | StudentExtension | Variable   |                                                        |
| 71       | 左眼散瞳-干预-球镜     | left_sphere_sp_int     | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 72       | 左眼散瞳-干预-柱镜     | left_cylinder_sp_int   | FLOAT(4,2)         | StudentExtension | Variable   |                                                        |
| 73       | 左眼散瞳-干预-轴位     | left_axis_sp_int       | INT                | StudentExtension | Variable   |                                                        |
| 74~89    | 第1次干预 ~ 第16次干预 | interv1 ~ ...16  | DATETIME           | StudentExtension | Variable   | 每列一个日期时间字段，记录各次干预时间                 |

------

## 2. 导入方式与映射要点

1. 稳定字段

   （education_id, name, gender, birthday, id_card, parent_name, parent_phone, school, phone, region, address, premature等）

   - 导入时，若数据库无该学生 `education_id` => 新建 Student
   - 若已存在 => 视需求是否允许覆盖已有稳定字段（通常不覆盖，或仅在数据库里为空值时才更新）

2. 可变字段

   （grade, class_name, height, weight, … 干预措施布尔列 … 各种视力/干预数据 … 第1~16次干预时间等）

   - 每次导入插入 StudentExtension 一条记录
   - 并加上一个“统计年份/测量日期”字段（可由用户在导入界面选择或 Excel 中添加）

3. 多选干预措施

   （如框架眼镜、隐形眼镜等）

   - Excel 中各有独立列（是/否或 1/0），对应数据库布尔列

4. 导入过程中

   - 先根据 “教育ID号” 查找 Student => 若无则新建 => 之后插入一条 extension 记录
   - Excel 的每列与上表对应，逐列填充相应字段
   - 对于数值型（FLOAT/INT）列要做好异常校验；布尔列（是/否）需转换成 True/False；日期列需解析成 DATETIME

------

## 3. 其他说明

- **统计年份/测量日期**：为简化，本文未列入Excel列，但强烈建议在导入流程中要求用户指定一个 `year` 或 `measure_date`，在写入 StudentExtension 时保存。这样才能区分不同年份/多次测量数据。
- **“稳定字段”若要变动**：若实际业务里可能更新区域、地址、电话等，也可移至可变表或做特殊覆盖逻辑。
- **干预措施布尔列**：如 “框架眼镜”、“隐形眼镜”、“夜戴角膜塑形镜”、“刮痧”等都用 TINYINT(1) 或 BOOL 存储，Excel 中若值为“1/0”或“是/否”都可转化。
- **扩展表**：可命名为 `student_extensions` 或 `student_snapshots`，并加上 `year` / `measure_date` / `import_batch` 等辅助字段。

------

## 4. 小结

- **稳定字段** 在 `Student` 表中一次性录入并保留；
- **可变字段** 全部放在 `StudentExtension` 表中，通过多次导入来插入多条记录，实现对同一学生不同时间数据的保存与对比；
- Excel 中每一列均有对应字段，上表明确列名与数据库字段、类型及表归属；
- 导入时注意先处理稳定字段，再处理可变字段，避免覆盖逻辑冲突。

通过本映射说明文档，前端/导入程序可以准确将 Excel 列与数据库字段进行一一对应，并在将来若字段发生调整或增加，也可以在此文档基础上做增补。