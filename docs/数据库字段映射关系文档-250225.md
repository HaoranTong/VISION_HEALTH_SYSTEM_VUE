下面给出根据我们的最新设计方案整理的两个数据表（学生基本信息表与学生扩展信息表）的字段映射关系文档。文档中每一行详细描述了字段的电子表格列名称、对应的数据库字段名称、数据类型、约束条件以及说明信息。请仔细检查，确认后存入长期记忆，并作为后续开发的依据。

------

# 数据库字段映射关系文档

## 一、学生基本信息表（students）

该表保存不会因数据年份变化而变化的学生基本信息。
 **注意：**“年级”字段因随时间变化已移至扩展信息表。

| 电子表格列名称 | 数据库字段   | 数据类型 | 约束条件                                      | 说明                             |
| -------------- | ------------ | -------- | --------------------------------------------- | -------------------------------- |
| 教育ID号       | education_id | string   | 非空；唯一；不允许重复                        | 原始导入数据的唯一标识，不可重复 |
| 学校           | school       | string   | 非空                                          | 学校名称                         |
| 班级           | 班级         | string   | 非空                                          | 学生所在班级                     |
| 姓名           | name         | string   | 非空                                          | 学生姓名                         |
| 性别           | gender       | string   | 非空；值限定为“男”或“女”                      | 学生性别（男/女）                |
| 出生日期       | birthday     | date     | 格式：YYYY-MM-DD；非空（建议）                | 学生出生日期                     |
| 联系电话       | phone        | string   | 非空；符合手机号码格式（如正则^1[3-9]\d{9}$） | 学生联系电话                     |
| 身份证号码     | 身份证号码   | string   | 非空；长度18；符合身份证号码格式              | 学生身份证号码                   |
| 区域           | 区域         | string   | 非空                                          | 学生所在区域或行政区划           |
| 联系地址       | 联系地址     | string   | 非空；长度限制（例如5-100字符）               | 学生详细联系地址                 |
| 家长姓名       | 家长姓名     | string   | 非空                                          | 法定监护人姓名                   |
| 家长电话       | 家长电话     | string   | 非空；符合手机号码格式                        | 法定监护人联系电话               |

------

## 二、学生扩展信息表（student_extensions）

该表保存随数据年份变化的学生检测信息和干预记录。
 每条记录对应一个数据年份，同一学生在不同年份的数据存为多条记录。

| 电子表格列名称            | 数据库字段         | 数据类型 | 约束条件                        | 说明                                                         |
| ------------------------- | ------------------ | -------- | ------------------------------- | ------------------------------------------------------------ |
| 年级                      | grade              | string   | 非空（随数据年份变化）          | 学生年级，因每年变化，存于扩展信息表中                       |
| 数据年份                  | 数据年份           | string   | 非空；格式为4位年份（如"2024"） | 导入数据所属年份，由用户在上传时选择                         |
| 身高                      | 身高               | float    | 可为空；非负数                  | 学生身高（单位：厘米）                                       |
| 体重                      | 体重               | float    | 可为空；非负数                  | 学生体重（单位：公斤）                                       |
| 饮食偏好                  | 饮食偏好           | string   | 可为空                          | 学生饮食习惯或偏好                                           |
| 运动偏好                  | 运动偏好           | string   | 可为空                          | 学生运动喜好                                                 |
| 健康教育                  | 健康教育           | string   | 可为空                          | 学生健康教育情况或记录                                       |
| 既往史                    | 既往史             | string   | 可为空                          | 既往病史（曾患疾病、病史描述）                               |
| 家族史                    | 家族史             | string   | 可为空                          | 家族遗传史或家族疾病史                                       |
| 是否早产                  | 是否早产           | string   | 可为空；限定为“是”或“否”        | 是否存在早产情况                                             |
| 过敏史                    | 过敏史             | string   | 可为空                          | 对药物、食物或其他物质的过敏情况                             |
| 右眼-裸眼视力             | 右眼-裸眼视力      | float    | 可为空；0.1精度                 | 右眼未经矫正的裸眼视力（导入数据）                           |
| 左眼-裸眼视力             | 左眼-裸眼视力      | float    | 可为空；0.1精度                 | 左眼未经矫正的裸眼视力（导入数据）                           |
| 右眼-矫正视力             | 右眼-矫正视力      | float    | 可为空；0.1精度                 | 右眼矫正视力                                                 |
| 左眼-矫正视力             | 左眼-矫正视力      | float    | 可为空；0.1精度                 | 左眼矫正视力                                                 |
| 右眼-角膜曲率K1           | 右眼-角膜曲率K1    | float    | 可为空；0.01精度                | 右眼角膜曲率K1值                                             |
| 左眼-角膜曲率K1           | 左眼-角膜曲率K1    | float    | 可为空；0.01精度                | 左眼角膜曲率K1值                                             |
| 右眼-角膜曲率K2           | 右眼-角膜曲率K2    | float    | 可为空；0.01精度                | 右眼角膜曲率K2值                                             |
| 左眼-角膜曲率K2           | 左眼-角膜曲率K2    | float    | 可为空；0.01精度                | 左眼角膜曲率K2值                                             |
| 右眼-眼轴                 | 右眼-眼轴          | float    | 可为空；0.1精度                 | 右眼眼轴长度（单位：mm）                                     |
| 左眼-眼轴                 | 左眼-眼轴          | float    | 可为空；0.1精度                 | 左眼眼轴长度（单位：mm）                                     |
| 右眼屈光-球镜             | 右眼屈光-球镜      | float    | 可为空；0.01精度                | 右眼球镜数据（球镜）                                         |
| 右眼屈光-柱镜             | 右眼屈光-柱镜      | float    | 可为空；0.01精度                | 右眼柱镜数据                                                 |
| 右眼屈光-轴位             | 右眼屈光-轴位      | float    | 可为空；1精度                   | 右眼屈光轴位（单位：°）                                      |
| 左眼屈光-球镜             | 左眼屈光-球镜      | float    | 可为空；0.01精度                | 左眼球镜数据                                                 |
| 左眼屈光-柱镜             | 左眼屈光-柱镜      | float    | 可为空；0.01精度                | 左眼柱镜数据                                                 |
| 左眼屈光-轴位             | 左眼屈光-轴位      | float    | 可为空；1精度                   | 左眼屈光轴位（单位：°）                                      |
| 右眼散瞳-球镜             | 右眼散瞳-球镜      | float    | 可为空；0.01精度                | 右眼散瞳后球镜数据                                           |
| 右眼散瞳-柱镜             | 右眼散瞳-柱镜      | float    | 可为空；0.01精度                | 右眼散瞳后柱镜数据                                           |
| 右眼散瞳-轴位             | 右眼散瞳-轴位      | float    | 可为空；1精度                   | 右眼散瞳后轴位（单位：°）                                    |
| 左眼散瞳-球镜             | 左眼散瞳-球镜      | float    | 可为空；0.01精度                | 左眼散瞳后球镜数据                                           |
| 左眼散瞳-柱镜             | 左眼散瞳-柱镜      | float    | 可为空；0.01精度                | 左眼散瞳后柱镜数据                                           |
| 左眼散瞳-轴位             | 左眼散瞳-轴位      | float    | 可为空；1精度                   | 左眼散瞳后轴位（单位：°）                                    |
| 右眼-前房深度             | 右眼-前房深度      | float    | 可为空；非负数                  | 右眼前房深度（单位：mm）                                     |
| 左眼-前房深度             | 左眼-前房深度      | float    | 可为空；非负数                  | 左眼前房深度（单位：mm）                                     |
| 其他情况                  | 其他情况           | string   | 可为空                          | 其他眼部情况说明或备注                                       |
| 眼疲劳状况                | 眼疲劳状况         | string   | 可为空                          | 学生眼疲劳状况（描述或评分）                                 |
| 框架眼镜                  | 框架眼镜           | Boolean  | 可为空；默认 False              | 是否使用框架眼镜                                             |
| 隐形眼镜                  | 隐形眼镜           | Boolean  | 可为空；默认 False              | 是否使用隐形眼镜                                             |
| 夜戴角膜塑型镜            | 夜戴角膜塑型镜     | Boolean  | 可为空；默认 False              | 是否使用夜戴角膜塑型镜                                       |
| 刮痧                      | 刮痧               | Boolean  | 可为空；默认 False              | 是否进行刮痧治疗                                             |
| 艾灸                      | 艾灸               | Boolean  | 可为空；默认 False              | 是否进行艾灸治疗                                             |
| 中药熏蒸                  | 中药熏蒸           | Boolean  | 可为空；默认 False              | 是否进行中药熏蒸                                             |
| 热灸训练                  | 热灸训练           | Boolean  | 可为空；默认 False              | 是否进行热灸训练                                             |
| 穴位贴敷                  | 穴位贴敷           | Boolean  | 可为空；默认 False              | 是否进行穴位贴敷                                             |
| 热磁脉冲                  | 热磁脉冲           | Boolean  | 可为空；默认 False              | 是否使用热磁脉冲                                             |
| 拔罐                      | 拔罐               | Boolean  | 可为空；默认 False              | 是否进行拔罐治疗                                             |
| 右眼-干预-裸眼视力        | 右眼-干预-裸眼视力 | float    | 可为空；0.1精度                 | 干预状态下右眼裸眼视力                                       |
| 左眼-干预-裸眼视力        | 左眼-干预-裸眼视力 | float    | 可为空；0.1精度                 | 干预状态下左眼裸眼视力                                       |
| 右眼屈光-干预-球镜        | 右眼屈光-干预-球镜 | float    | 可为空；0.01精度                | 干预后右眼屈光检查——球镜数据                                 |
| 右眼屈光-干预-柱镜        | 右眼屈光-干预-柱镜 | float    | 可为空；0.01精度                | 干预后右眼屈光检查——柱镜数据                                 |
| 右眼屈光-干预-轴位        | 右眼屈光-干预-轴位 | float    | 可为空；1精度                   | 干预后右眼屈光轴位（单位：°）                                |
| 左眼屈光-干预-球镜        | 左眼屈光-干预-球镜 | float    | 可为空；0.01精度                | 干预后左眼屈光检查——球镜数据                                 |
| 左眼屈光-干预-柱镜        | 左眼屈光-干预-柱镜 | float    | 可为空；0.01精度                | 干预后左眼屈光检查——柱镜数据                                 |
| 左眼屈光-干预-轴位        | 左眼屈光-干预-轴位 | float    | 可为空；1精度                   | 干预后左眼屈光轴位（单位：°）                                |
| 右眼散瞳-干预-球镜        | 右眼散瞳-干预-球镜 | float    | 可为空；0.01精度                | 干预后右眼散瞳检查——球镜数据                                 |
| 右眼散瞳-干预-柱镜        | 右眼散瞳-干预-柱镜 | float    | 可为空；0.01精度                | 干预后右眼散瞳检查——柱镜数据                                 |
| 右眼散瞳-干预-轴位        | 右眼散瞳-干预-轴位 | float    | 可为空；1精度                   | 干预后右眼散瞳检查——轴位（单位：°）                          |
| 左眼散瞳-干预-球镜        | 左眼散瞳-干预-球镜 | float    | 可为空；0.01精度                | 干预后左眼散瞳检查——球镜数据                                 |
| 左眼散瞳-干预-柱镜        | 左眼散瞳-干预-柱镜 | float    | 可为空；0.01精度                | 干预后左眼散瞳检查——柱镜数据                                 |
| 左眼散瞳-干预-轴位        | 左眼散瞳-干预-轴位 | float    | 可为空；1精度                   | 干预后左眼散瞳检查——轴位（单位：°）                          |
| 【新增】干预后视力等级    | 干预后视力等级     | string   | 可为空；长度不超过20字符        | 根据【3.2.2 分析模型】判断，填写“临床前期近视”、“轻度近视”或“中度近视” |
| 【新增】左眼裸眼视力变化  | 左眼裸眼视力变化   | float    | 可为空；0.1精度                 | 左眼-干预-裸眼视力与左眼-裸眼视力的差值                      |
| 【新增】右眼裸眼视力变化  | 右眼裸眼视力变化   | float    | 可为空；0.1精度                 | 右眼-干预-裸眼视力与右眼-裸眼视力的差值                      |
| 【新增】左眼屈光-球镜变化 | 左眼屈光-球镜变化  | float    | 可为空；0.01精度                | 左眼屈光-干预-球镜与左眼屈光-球镜的差值                      |
| 【新增】右眼屈光-球镜变化 | 右眼屈光-球镜变化  | float    | 可为空；0.01精度                | 右眼屈光-干预-球镜与右眼屈光-球镜的差值                      |
| 【新增】左眼屈光-柱镜变化 | 左眼屈光-柱镜变化  | float    | 可为空；0.01精度                | 左眼屈光-干预-柱镜与左眼屈光-柱镜的差值                      |
| 【新增】右眼屈光-柱镜变化 | 右眼屈光-柱镜变化  | float    | 可为空；0.01精度                | 右眼屈光-干预-柱镜与右眼屈光-柱镜的差值                      |
| 【新增】左眼视力干预效果  | 左眼视力干预效果   | string   | 可为空；长度不超过20字符        | 根据“左眼裸眼视力变化”判定，填写“上升”、“维持”或“下降”       |
| 【新增】右眼视力干预效果  | 右眼视力干预效果   | string   | 可为空；长度不超过20字符        | 根据“右眼裸眼视力变化”判定，填写“上升”、“维持”或“下降”       |
| 【新增】左眼球镜干预效果  | 左眼球镜干预效果   | string   | 可为空；长度不超过20字符        | 根据“左眼屈光-球镜变化”判定，填写“上升”、“维持”或“下降”      |
| 【新增】右眼球镜干预效果  | 右眼球镜干预效果   | string   | 可为空；长度不超过20字符        | 根据“右眼屈光-球镜变化”判定，填写“上升”、“维持”或“下降”      |
| 【新增】左眼柱镜干预效果  | 左眼柱镜干预效果   | string   | 可为空；长度不超过20字符        | 根据“左眼屈光-柱镜变化”判定，填写“上升”、“维持”或“下降”      |
| 【新增】右眼柱镜干预效果  | 右眼柱镜干预效果   | string   | 可为空；长度不超过20字符        | 根据“右眼屈光-柱镜变化”判定，填写“上升”、“维持”或“下降”      |
| 第1次干预                 | 第1次干预          | datetime | ISO 8601格式；可为空            | 第1次干预记录日期及时间                                      |
| 第2次干预                 | 第2次干预          | datetime | ISO 8601格式；可为空            | 第2次干预记录日期及时间                                      |
| 第3次干预                 | 第3次干预          | datetime | ISO 8601格式；可为空            | 第3次干预记录日期及时间                                      |
| 第4次干预                 | 第4次干预          | datetime | ISO 8601格式；可为空            | 第4次干预记录日期及时间                                      |
| 第5次干预                 | 第5次干预          | datetime | ISO 8601格式；可为空            | 第5次干预记录日期及时间                                      |
| 第6次干预                 | 第6次干预          | datetime | ISO 8601格式；可为空            | 第6次干预记录日期及时间                                      |
| 第7次干预                 | 第7次干预          | datetime | ISO 8601格式；可为空            | 第7次干预记录日期及时间                                      |
| 第8次干预                 | 第8次干预          | datetime | ISO 8601格式；可为空            | 第8次干预记录日期及时间                                      |
| 第9次干预                 | 第9次干预          | datetime | ISO 8601格式；可为空            | 第9次干预记录日期及时间                                      |
| 第10次干预                | 第10次干预         | datetime | ISO 8601格式；可为空            | 第10次干预记录日期及时间                                     |
| 第11次干预                | 第11次干预         | datetime | ISO 8601格式；可为空            | 第11次干预记录日期及时间                                     |
| 第12次干预                | 第12次干预         | datetime | ISO 8601格式；可为空            | 第12次干预记录日期及时间                                     |
| 第13次干预                | 第13次干预         | datetime | ISO 8601格式；可为空            | 第13次干预记录日期及时间                                     |
| 第14次干预                | 第14次干预         | datetime | ISO 8601格式；可为空            | 第14次干预记录日期及时间                                     |
| 第15次干预                | 第15次干预         | datetime | ISO 8601格式；可为空            | 第15次干预记录日期及时间                                     |
| 第16次干预                | 第16次干预         | datetime | ISO 8601格式；可为空            | 第16次干预记录日期及时间                                     |

------

## 说明

1. **学生基本信息表（students）**
   - 保存的为不随时间变化的基本信息。
   - “教育ID号”作为唯一标识，不允许重复。
   - “年级”字段**不保留**于此表，而移至扩展信息表。
2. **学生扩展信息表（student_extensions）**
   - 保存的数据为随时间变化的数据，包括检测数据、干预记录以及干预效果等。
   - 每条扩展记录对应一批数据（即一个“数据年份”），即同一学生在不同年份的记录存为多条记录。
   - 对于同一学生，若导入数据的“数据年份”相同，则执行部分更新（更新基本信息和扩展信息中为空的字段，不覆盖已有数据），**不新增扩展记录**。
   - 若“数据年份”不同，则在扩展表中新增一条记录。
3. **关于字段映射**
   - 电子表格列名称与数据库字段是一一对应的，导入时按此映射关系将数据写入数据库。
   - 对于数值型数据（如视力、身高、体重等），要求满足相应精度与数值范围。
   - 对于布尔字段（如“框架眼镜”、“隐形眼镜”等），电子表格中应以“是”或“否”表示，映射到数据库后转换为 True/False。
   - 对于干预记录和计算字段（例如“预防干预效果”等），这些字段通过后续数据处理逻辑进行计算更新，其数据库字段由【新增】标注，并在扩展信息表中保存。
4. **数据约束说明**
   - 基本信息表中各字段大多为必填字段（如教育ID号、学校、班级、姓名、性别、出生日期、联系电话、身份证号码、区域、联系地址、家长姓名、家长电话），系统在导入时进行必填字段校验。
   - 扩展信息表中，“数据年份”字段为必填，且要求为4位数字（如“2024”）。
   - 其他检测数据字段视具体数据情况可为空。
5. **数据计算字段**
   - 部分计算字段（如“干预后视力等级”、“左眼裸眼视力变化”、“右眼裸眼视力变化”、“左眼屈光-球镜变化”等）标记为【新增】，由后续业务逻辑自动计算更新，不通过电子表格直接导入。

------

请仔细检查上述映射关系文档，如果确认无误，请告知，我将继续后续代码修改工作。